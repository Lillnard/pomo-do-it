<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pomo do it! ‚Ä¢ Pomodoro</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app" id="appRoot">
    <header class="topbar">
      <div class="brand">
        <div class="logo">üçÖ</div>
        <div class="brand-text">
          <div class="brand-name">Pomo do it!</div>
          <div class="brand-sub" id="brandSub">Pomodoro inteligente para estudos</div>
        </div>
      </div>

      <div class="top-actions">
        <button class="chip" id="langToggle" title="Idioma">
          <span class="chip-ico">üåê</span>
          <span class="chip-text" id="langLabel">PT</span>
        </button>

        <button class="chip" id="themeToggle" title="Tema">
          <span class="chip-ico" id="themeIcon">üåô</span>
          <span class="chip-text" id="themeLabel">Dark</span>
        </button>

        <button class="chip" id="soundToggle" title="Som do timer (beeps)">
          <span class="chip-ico" id="soundIcon">üîä</span>
          <span class="chip-text" id="soundLabel">On</span>
        </button>

        <button class="chip" id="notifyBtn" title="Notifica√ß√µes">
          <span class="chip-ico">üîî</span>
          <span class="chip-text" id="notifyLabel">Ativar</span>
        </button>

        <button class="chip" id="fullscreenBtn" title="Tela cheia">
          <span class="chip-ico">‚õ∂</span>
          <span class="chip-text" id="fsLabel">Full</span>
        </button>
      </div>
    </header>

    <main class="grid">
      <!-- 1) TIMER -->
      <section class="card timer">
        <div class="card-head">
          <div>
            <h2 id="timerTitle">Sess√£o</h2>
            <p class="muted" id="timerSubtitle">Planeje, foque e registre. Sem drama.</p>
          </div>
          <div class="badge" id="phaseBadge">FOCO</div>
        </div>

        <div class="timer-face">
          <div class="time" id="timeText">25:00</div>
          <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
          </div>

          <div class="mini">
            <div class="mini-item">
              <div class="mini-k" id="miniCyclesK">Ciclos</div>
              <div class="mini-v"><span id="cycleNow">1</span>/<span id="cycleTotal">4</span></div>
            </div>
            <div class="mini-item">
              <div class="mini-k" id="miniFocusK">Meta</div>
              <div class="mini-v"><span id="goalPomos">4</span> üçÖ</div>
            </div>
            <div class="mini-item">
              <div class="mini-k" id="miniDistrK">Distra√ß√µes</div>
              <div class="mini-v"><span id="distractions">0</span></div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button class="btn primary" id="startBtn">‚ñ∂ Iniciar</button>
          <button class="btn" id="pauseBtn" disabled>‚è∏ Pausar</button>
          <button class="btn" id="skipBtn">‚è≠ Pular</button>
          <button class="btn danger" id="resetBtn">‚Ü∫ Reset</button>
        </div>

        <div class="row">
          <div class="field">
            <label id="presetLabel">Preset</label>
            <select id="presetSelect">
              <option value="classic">Cl√°ssico (25/5, longa 15)</option>
              <option value="deep">Deep Work (50/10, longa 20)</option>
              <option value="sprint">Sprint (15/3, longa 10)</option>
              <option value="custom">Personalizado</option>
            </select>
          </div>

          <div class="field">
            <label id="taskLinkLabel">Tarefa ativa</label>
            <select id="activeTaskSelect">
              <option value="">(Sem tarefa)</option>
            </select>
          </div>
        </div>

        <div class="row three">
          <div class="field">
            <label id="focusLabel">Foco (min)</label>
            <input type="number" id="focusMin" min="5" max="120" value="25" />
          </div>
          <div class="field">
            <label id="breakLabel">Pausa (min)</label>
            <input type="number" id="breakMin" min="1" max="60" value="5" />
          </div>
          <div class="field">
            <label id="longLabel">Longa (min)</label>
            <input type="number" id="longMin" min="5" max="60" value="15" />
          </div>
        </div>

        <div class="row three">
          <div class="field">
            <label id="cyclesLabel">Ciclos</label>
            <input type="number" id="cyclesCount" min="1" max="12" value="4" />
          </div>
          <div class="field">
            <label id="goalLabel">Meta üçÖ</label>
            <input type="number" id="goalCount" min="1" max="24" value="4" />
          </div>
          <div class="field">
            <label id="autoLabel">Auto</label>
            <button class="btn tiny" id="autoToggle">
              <span id="autoState">On</span>
            </button>
          </div>
        </div>

        <div class="row">
          <div class="field grow">
            <label id="sessionIntentLabel">Plano da sess√£o (1 frase)</label>
            <input type="text" id="sessionIntent" placeholder="Ex: Revisar fun√ß√µes e resolver 10 exerc√≠cios" maxlength="80" />
          </div>
          <button class="btn" id="saveSessionBtn" title="Salvar plano">üíæ</button>
        </div>
      </section>

      <!-- 2) HUB (abas din√¢micas) -->
      <section class="card hub">
        <div class="card-head">
          <div>
            <h2 id="hubTitle">Central</h2>
            <p class="muted" id="hubSubtitle">Tudo organizado em abas pra caber bonito.</p>
          </div>

          <div class="tabs" role="tablist">
            <button class="tab active" data-tab="tasks" id="tabTasks">Tarefas</button>
            <button class="tab" data-tab="stats" id="tabStats">Metas</button>
            <button class="tab" data-tab="notes" id="tabNotes">Notas</button>
            <button class="tab" data-tab="history" id="tabHistory">Hist√≥rico</button>
          </div>
        </div>

        <!-- TASKS -->
        <div class="tabpane active" id="pane-tasks" role="tabpanel">
          <div class="pane-head">
            <div class="pill" id="tasksCountPill">0</div>
          </div>

          <div class="task-add">
            <input type="text" id="taskName" placeholder="Nova tarefa (ex: Matem√°tica, cap√≠tulo 3)" maxlength="60" />
            <input type="number" id="taskEst" min="1" max="24" value="3" title="Pomodoros estimados" />
            <button class="btn primary" id="addTaskBtn">+ Adicionar</button>
          </div>

          <div class="list" id="taskList" aria-label="Lista de tarefas"></div>

          <div class="tasks-foot">
            <button class="btn" id="clearDoneBtn">üßπ Limpar conclu√≠das</button>
            <button class="btn" id="seedBtn" title="Exemplo r√°pido">‚ú® Exemplo</button>
          </div>
        </div>

        <!-- STATS -->
        <div class="tabpane" id="pane-stats" role="tabpanel">
          <div class="stats-grid">
            <div class="stat">
              <div class="stat-k" id="stFocusTodayK">Foco hoje</div>
              <div class="stat-v"><span id="focusToday">0</span> min</div>
            </div>
            <div class="stat">
              <div class="stat-k" id="stPomosTodayK">üçÖ hoje</div>
              <div class="stat-v"><span id="pomosToday">0</span></div>
            </div>
            <div class="stat">
              <div class="stat-k" id="stStreakK">Streak</div>
              <div class="stat-v"><span id="streak">0</span> üî•</div>
            </div>
            <div class="stat">
              <div class="stat-k" id="stBestHourK">Melhor hora</div>
              <div class="stat-v"><span id="bestHour">--</span></div>
            </div>
          </div>

          <div class="chart">
            <div class="chart-head">
              <div class="chart-title" id="chartTitle">√öltimos 7 dias (üçÖ)</div>
              <div class="chart-legend muted" id="chartLegend">barra = pomodoros conclu√≠dos</div>
            </div>
            <div class="bars" id="bars7"></div>
          </div>

          <div class="panel-actions">
            <button class="btn" id="exportCsvBtn">‚¨á Exportar CSV</button>
            <button class="btn" id="printReportBtn">üñ® Relat√≥rio (PDF)</button>
            <button class="btn danger" id="resetAllBtn">üóë Reset geral</button>
          </div>
        </div>

        <!-- NOTES -->
        <div class="tabpane" id="pane-notes" role="tabpanel">
          <div class="note-box">
            <div class="note-top">
              <div class="note-title" id="noteTitle">Nota r√°pida</div>
              <div class="muted" id="noteHint">No fim de cada foco, registre 1 insight. Aqui voc√™ pode anotar tamb√©m.</div>
            </div>
            <textarea id="noteText" placeholder="Ex: Entendi como aplicar a f√≥rmula..."></textarea>
            <div class="note-actions">
              <button class="btn primary" id="saveNoteBtn">üíæ Salvar nota</button>
              <button class="btn" id="clearNoteBtn">üßΩ Limpar</button>
            </div>
          </div>

          <div class="list" id="notesList" aria-label="Lista de notas"></div>
        </div>

        <!-- HISTORY -->
        <div class="tabpane" id="pane-history" role="tabpanel">
          <div class="history-head">
            <div class="muted" id="historyHint">Registros dos ciclos (foco/pausa) com tarefa, plano e tempo.</div>
            <button class="btn" id="clearHistoryBtn">üßπ Limpar hist√≥rico</button>
          </div>
          <div class="list" id="historyList" aria-label="Hist√≥rico"></div>
        </div>
      </section>

      <!-- 3) MUSIC ONLY -->
      <section class="card music">
        <div class="card-head">
          <div>
            <h2 id="musicTitle">Som e m√∫sica</h2>
            <p class="muted" id="musicSubtitle">Toca no foco, silencia na pausa. Com fade suave.</p>
          </div>
          <button class="btn tiny" id="ambientToggle">
            <span id="ambientState">Play</span>
          </button>
        </div>

        <div class="ambient-grid">
          <div class="field">
            <label id="ambientALabel">Camada A</label>
            <select id="ambientASelect"></select>
          </div>
          <div class="field">
            <label id="ambientBLabel">Camada B</label>
            <select id="ambientBSelect"></select>
          </div>
          <div class="field">
            <label id="ambientVolLabel">Volume</label>
            <input type="range" id="ambientVolume" min="0" max="100" value="35" />
          </div>
        </div>

        <div class="ambient-upload">
          <div class="field grow">
            <label id="uploadLabel">Enviar sua m√∫sica (MP3)</label>
            <input type="file" id="userMusicFile" accept="audio/*" />
          </div>
          <button class="btn" id="clearUserMusicBtn" title="Remover m√∫sica enviada">üßΩ Limpar</button>
        </div>

        <div class="music-options">
          <div class="opt">
            <input type="checkbox" id="focusOnlyToggle" checked />
            <label for="focusOnlyToggle" id="focusOnlyLabel">Auto-play s√≥ no FOCO</label>
          </div>
          <div class="opt">
            <input type="checkbox" id="fadeToggle" checked />
            <label for="fadeToggle" id="fadeLabel">Fade in/out autom√°tico</label>
          </div>
          <div class="opt">
            <input type="checkbox" id="dynamicPingToggle" checked />
            <label for="dynamicPingToggle" id="dynamicPingLabel">Som din√¢mico (a cada 8 min)</label>
          </div>
        </div>

        <div class="ambient-foot">
          <div class="muted small" id="ambientNote">
            Dica: ‚ÄúWhite Noise‚Äù funciona sem arquivo. Ambientes usam /audio/*.mp3
          </div>
          <button class="btn" id="ambientStopBtn">‚èπ Stop</button>
        </div>

        <div class="mini-help">
          <div class="muted small">
            Se o navegador bloquear √°udio autom√°tico, clique em ‚ÄúPlay‚Äù uma vez.
          </div>
        </div>
      </section>
    </main>

    <div class="toast" id="toast" aria-live="polite" aria-atomic="true"></div>
  </div>

  <script src="script.js"></script>
</body>
</html>